# ğŸ¶ æ—¥æœ¬é…’ãƒãƒƒãƒ— (Sake Map)

æ—¥æœ¬å…¨å›½ã®æ—¥æœ¬é…’ã‚’éƒ½é“åºœçœŒåˆ¥ã«æ¢ç´¢ã§ãã‚‹ Django Web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚  
[ã•ã‘ã®ã‚ API](https://muro.sakenowa.com/sakenowa-data/) ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ´»ç”¨ã—ã€éŠ˜æŸ„æ¤œç´¢ãƒ»ãƒ•ãƒ¬ãƒ¼ãƒãƒ¼ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤ºãƒ»é£²é…’ãƒ­ã‚°ãƒ»ãŠæ°—ã«å…¥ã‚Šç®¡ç†ãªã©ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

---

## ä¸»ãªæ©Ÿèƒ½

| æ©Ÿèƒ½ | èª¬æ˜ |
|------|------|
| **éƒ½é“åºœçœŒãƒãƒƒãƒ—** | Geolonia ã®æ—¥æœ¬åœ°å›³ SVG ã§å…¨å›½ã‚’è¡¨ç¤ºã€‚é£²é…’å‰²åˆã«å¿œã˜ã¦è‰²ãŒå¤‰åŒ– |
| **éƒ½é“åºœçœŒè©³ç´°** | å„çœŒã®è”µå…ƒãƒ»éŠ˜æŸ„ã‚’ä¸€è¦§è¡¨ç¤º |
| **æ—¥æœ¬é…’ä¸€è¦§ãƒ»æ¤œç´¢** | éŠ˜æŸ„åãƒ»è”µå…ƒåã§ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ |
| **æ—¥æœ¬é…’è©³ç´°** | ãƒ•ãƒ¬ãƒ¼ãƒãƒ¼ãƒãƒ£ãƒ¼ãƒˆï¼ˆè¯ã‚„ã‹ãƒ»èŠ³é†‡ãƒ»é‡åšãƒ»ç©ã‚„ã‹ãƒ»ãƒ‰ãƒ©ã‚¤ãƒ»è»½å¿«ï¼‰ã‚’è¡¨ç¤º |
| **ãƒã‚¤ãƒ­ã‚°** | é£²ã‚“ã æ—¥æœ¬é…’ã‚’è¨˜éŒ²ï¼ˆé£²ã‚“ã æ—¥ãƒ»è©•ä¾¡ãƒ»ãƒ¡ãƒ¢ï¼‰ã€‚åœ°å›³ä¸Šã§é£²é…’é€²æ—ã‚’å¯è¦–åŒ– |
| **ãŠæ°—ã«å…¥ã‚Š** | ã€Œã„ã„ã­ã€ã—ãŸæ—¥æœ¬é…’ã‚’ã‚«ãƒ¼ãƒ‰ã‚°ãƒªãƒƒãƒ‰ã§ä¸€è¦§è¡¨ç¤º |
| **ãƒ­ã‚°ã‚¤ãƒ³ / ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ** | ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã€‚ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã§ãƒã‚¤ãƒ­ã‚°ãƒ»ãŠæ°—ã«å…¥ã‚ŠãŒåˆ©ç”¨å¯èƒ½ |

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Python** 3.13+
- **Django** 5.2+
- **SQLite** (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)
- **ã•ã‘ã®ã‚ API** â€” éƒ½é“åºœçœŒãƒ»è”µå…ƒãƒ»éŠ˜æŸ„ãƒ»ãƒ•ãƒ¬ãƒ¼ãƒãƒ¼ãƒãƒ£ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿
- **Geolonia japanese-prefectures** â€” æ—¥æœ¬åœ°å›³ SVG

---

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³ã¨ä»®æƒ³ç’°å¢ƒ

```bash
git clone <repository-url>
cd sake_map
python -m venv .venv
source .venv/bin/activate  # macOS / Linux
```

### 2. ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install -r requirements.txt
```

### 3. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

`.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«ä½œæˆã—ã¾ã™ï¼š

```bash
cp .env.example .env
```

```ini
DJANGO_SECRET_KEY=your-secret-key-here
DJANGO_DEBUG=True
```

SECRET_KEY ã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ç”Ÿæˆã§ãã¾ã™ï¼š

```bash
python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
```

### 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

```bash
python manage.py migrate
```

### 5. ã•ã‘ã®ã‚ API ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—

```bash
python manage.py fetch_sakenowa
```

ã“ã‚Œã«ã‚ˆã‚Šä»¥ä¸‹ã®ãƒ‡ãƒ¼ã‚¿ãŒç™»éŒ²ã•ã‚Œã¾ã™ï¼š

- 48 éƒ½é“åºœçœŒï¼ˆã‚¨ãƒªã‚¢ï¼‰
- ç´„ 1,700 è”µå…ƒ
- ç´„ 3,100 éŠ˜æŸ„
- ç´„ 1,300 ãƒ•ãƒ¬ãƒ¼ãƒãƒ¼ãƒãƒ£ãƒ¼ãƒˆ

### 6. ç®¡ç†ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆ

```bash
python manage.py createsuperuser
```

### 7. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
python manage.py runserver
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://127.0.0.1:8000/prefecture/ ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚

---

## URL ä¸€è¦§

| URL | ãƒšãƒ¼ã‚¸ |
|-----|--------|
| `/prefecture/` | éƒ½é“åºœçœŒãƒãƒƒãƒ—ï¼ˆãƒˆãƒƒãƒ—ï¼‰ |
| `/prefecture/<id>/` | éƒ½é“åºœçœŒè©³ç´° |
| `/sake/` | æ—¥æœ¬é…’ä¸€è¦§ãƒ»æ¤œç´¢ |
| `/sake/<id>/` | æ—¥æœ¬é…’è©³ç´° + ãƒ­ã‚°ç™»éŒ² |
| `/mylog/` | ãƒã‚¤ãƒ­ã‚°ä¸€è¦§ + é£²é…’ãƒãƒƒãƒ— |
| `/mylog/<id>/` | ãƒ­ã‚°è©³ç´° + ç·¨é›† |
| `/favorites/` | ãŠæ°—ã«å…¥ã‚Šä¸€è¦§ |
| `/login/` | ãƒ­ã‚°ã‚¤ãƒ³ |
| `/logout/` | ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ |
| `/admin/` | Django ç®¡ç†ç”»é¢ |

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
sake_map/
â”œâ”€â”€ manage.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .env                  
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â”œâ”€â”€ sake_map/              # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
â”‚   â”œâ”€â”€ settings.py
â”‚   â”œâ”€â”€ urls.py
â”‚   â””â”€â”€ wsgi.py
â””â”€â”€ sake_app/              # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒª
    â”œâ”€â”€ models.py          # Prefecture, Brewery, Sake, SakeLog
    â”œâ”€â”€ views.py           # å„ãƒšãƒ¼ã‚¸ã®ãƒ“ãƒ¥ãƒ¼
    â”œâ”€â”€ urls.py            # URLãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
    â”œâ”€â”€ forms.py           # SakeLogForm
    â”œâ”€â”€ admin.py           # ç®¡ç†ç”»é¢ç™»éŒ²
    â”œâ”€â”€ management/
    â”‚   â””â”€â”€ commands/
    â”‚       â””â”€â”€ fetch_sakenowa.py   # APIãƒ‡ãƒ¼ã‚¿å–å¾—ã‚³ãƒãƒ³ãƒ‰
    â”œâ”€â”€ static/
    â”‚   â””â”€â”€ sake_app/
    â”‚       â””â”€â”€ map-full.svg        # æ—¥æœ¬åœ°å›³SVG
    â””â”€â”€ templates/
        â””â”€â”€ sake_app/
            â”œâ”€â”€ base.html            # ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
            â”œâ”€â”€ japan_map.html       # åœ°å›³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
            â”œâ”€â”€ login.html           # ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
            â”œâ”€â”€ prefecture_list.html
            â”œâ”€â”€ prefecture_detail.html
            â”œâ”€â”€ sake_list.html
            â”œâ”€â”€ sake_detail.html
            â”œâ”€â”€ sakelog_list.html
            â”œâ”€â”€ sakelog_detail.html
            â””â”€â”€ favorite_list.html
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

```
Prefecture (éƒ½é“åºœçœŒ)
  â””â”€â”€ Brewery (è”µå…ƒ)
        â””â”€â”€ Sake (æ—¥æœ¬é…’)  â† ãƒ•ãƒ¬ãƒ¼ãƒãƒ¼ãƒãƒ£ãƒ¼ãƒˆ f1ã€œf6
              â””â”€â”€ SakeLog (ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°)  â† é£²ã‚“ã /ã„ã„ã­/è©•ä¾¡/ãƒ¡ãƒ¢
```

---

## ã•ã‘ã®ã‚ API ã«ã¤ã„ã¦

æœ¬ã‚¢ãƒ—ãƒªã¯ [ã•ã‘ã®ã‚ãƒ‡ãƒ¼ã‚¿](https://muro.sakenowa.com/sakenowa-data/) ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚  
ãƒ‡ãƒ¼ã‚¿ã®åˆ©ç”¨ã«ã‚ãŸã£ã¦ã¯ã€ã•ã‘ã®ã‚ã®åˆ©ç”¨è¦ç´„ã«å¾“ã£ã¦ãã ã•ã„ã€‚

---

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

åœ°å›³ SVG: [Geolonia japanese-prefectures](https://github.com/geolonia/japanese-prefectures)
